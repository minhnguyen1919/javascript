<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>
<body>
	<div id="switcher">
		<div class="label">Text Size</div>
		<button id="switcher-default">Default</button>
		<button id="switcher-large">Bigger</button>
		<button id="switcher-small">Smaller</button>
	</div>
	<div class="speech">
		<p>Fourscore and seven years ago our fathers brought forth
			on this continent a new nation, conceived in liberty,
			and dedicated to the proposition that all men are
			created equal.
		</p>
		<p>Now we are engaged in a great civil war, testing whether
			that nation, or any nation so conceived and so dedicated,
			can long endure. We are met on a great battlefield of
			that war. We have come to dedicate a portion of that
			field as a final resting-place for those who here gave
			their lives that the nation might live. It is altogether
			fitting and proper that we should do this. But, in a
			larger sense, we cannot dedicate, we cannot consecrate,
			we cannot hallow, this ground.
			lorem*100
		</p>
		<a href="#" class="more">read more</a>
		...
	</div>

	<script>
		/*
		// queuing does not automatically apply to other non-effect methods such as . css()
		// Unfinished code
		$(document).ready(function() {
			$('div.label').click(function() {
				var paraWidth = $('div.speech p').outerWidth();
				var $switcher = $(this).parent();
				var switcherWidth = $switcher.outerWidth();
				$switcher
				.css({position: 'relative'})
				.fadeTo('fast', 0.5)
				.animate({
					left: paraWidth - switcherWidth
				}, {
					duration: 'slow',
					queue: false
				})
				.fadeTo('slow', 1.0)
				.slideUp('slow')
				.css({backgroundColor: '#f00'})
				.slideDown('slow');
			});
		});*/


		// One way we can add non-effect methods to the queue is to use the appropriately named .queue() method
		$(document).ready(function() {
			$('div.label').click(function() {
				var paraWidth = $('div.speech p').outerWidth();
				var $switcher = $(this).parent();
				var switcherWidth = $switcher.outerWidth();
				$switcher
				.css({position: 'relative'})
				.fadeTo('fast', 0.5)
				.animate({
					left: paraWidth - switcherWidth
				}, {
					duration: 'slow',
					queue: false
				})
				.fadeTo('slow', 1.0)
				.slideUp('slow')
				.queue(function(next) {
					$switcher.css({backgroundColor: '#f00'});
					next();
				})
				.slideDown('slow');
			});
		});
	</script>
</body>
</html>
